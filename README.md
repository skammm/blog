# blog
use nodejs create blog ```用node写的js相当于一个服务器```
## node.js是什么
- node不是框架，不是语言，是js的运行环境，简单来说node可以解析执行js代码
- node中的js
   - EcmaScript
   - 没有Bom和Dom
   - 在node这个js执行环境中，为JS提供服务器级别的操作API
     - 例如文件的读写
     - 网络服务的构建
     - 网络通信
     - http服务器。。。

## node.js介绍

### 1.1node.js是什么
- node不是框架，不是语言，是js的运行环境，简单来说node可以解析执行js代码
- node中的js
   - EcmaScript
   - 没有Bom和Dom
   - 在node这个js执行环境中，为JS提供服务器级别的操作API
     - 例如文件的读写 ```readFile里的路径不是相对于当前文件的路径，是相对于执行node命令所处的终端路径```
     - 网络服务的构建
     - 网络通信
     - http服务器。。。
- 事件驱动、非阻塞io模型、轻量高效
- npm是由node开发的世界上最大的开源系统，把js相关包存放在npm上
- 构建于V8chrome的引擎之上

### 1.2nodejs能做什么？
- web服务器内容
  - 接口服务器
  - 游戏服务器等
- 命令行工作

***   

## 2.起步
### 2.1 node的基本使用
- node + 文件名 ```解析执行js文件夹```
- 引入核心文件读写文件
- http ```node构建一个web服务器```

### 2.2 服务器要干什么？
  - 提供对数据的服务
  - 发请求
  - 接受请求
  - 处理请求
  - 发送响应

## 3.Node中的js
  - Ecmasript
  - 核心模块
  - 第三方模块
  - 用户自定义模块

### 3.1 核心模块
 Node为js提供了很多服务器级别的API，这些API绝大多数被包装到一个具名的模块中

### 3.2 模块化
 每个文件之间互不干涉，没有全局作用域，默认是封闭的。
 #### 如何进行通信？
   有时候我们加载文件不是为了执行里面的代码，更重要的是为了里面的成员和方法。
   require 方法有两个作用：
   - 加载文件模块并执行里边的代码
   - 拿到被加载文件模块导出的接口对象```在每个模块中都提供一个对象：exports，默认是一个空对象

### 3.3 端口号
 - ip地址用来定位计算机，端口号用来定位具体的应用程序

 - 普通用户访问应用程序时，浏览器会自动申请一个端口号占用


 ## 4.Node中的模块系统

 ### 4.1 什么是模块？
  - 文件作用域
  - 通信规则
     - 加载require
     - 导出
 ### 4.2 CommonJS 模块规范
  在node中的js还有一个很重要的概念，模块系统
  - 模块作用域
  - 使用require来加载对象
  - 使用exports接口对象来导出模块中的成员 
    ```在node中，每个模块内部都有一个module对象，该model对象中有一个exports成员，默认每个模块最后都有一句：return module.exports```
 ### 4.3 require方法的加载规则
   - 优先从缓存中加载，如果缓存中已经加载过该文件，那么不会重新执行该文件，只会获取他的接口对象
   - 判断模块标识符
      - 核心模块
      - 第三方模块
      - 自己写的模块
 ### 4.4 npm命令行工具
   - npm install --version
   - npm install --global npm ```升级npm```
   - npm init -y ```跳过向导，快速生成```
   - npm install
   - npm install 包名
   - npm uninstall 包名
   - npm help ```查看使用帮助```

## 5.Express
 
 原生的http在某些方面不足以应对我们的开发需求，所以我们就使用框架来提高我们的开发效率，框架的目的就是提高效率，让我们的代码更加统一。

 ### 5.1 修改完代码自动重启
  ```npm i --global nodemon```
 ### 5.2 基本路由
  路由器
   - 请求方法
   - 请求路径
   - 处理函数
   ```app.get('/',function(req,res){})```
### 5.3 静态资源
  用于开放某些静态资源，浏览器解析到外链时能够自动获取到该资源
  ```app.use('/node_modules',express.static('./node_modules/'))```


## 6.mongodb
  ### 6.1 启动和链接数据库
   - 启动 mongod ```在第一次执行该命令时，要手动在改盘符下创建data/db```
   - 连接 mongo
   - 退出  exit

   ### 6.2在node中如何操作mongodb
     #### 6.2.1 使用mongoose操作数据库
     使用第三方包mongoose来来操作mongodb数据库，mongoose是基于mongodb官方的mongodb包再一次做了封装。

     #### 6.2.2 mongodb数据库的基本概念

      - 可以有多个数据库
      - 一个数据库可以有多个集合（相当于数组）
      - 一个集合可以有多个文档（表记录）
      - 文档相对于别的数据库比较灵活，没有任何限制
      - mongodb比较灵活，不需要像mysql一样先创建数据库、表、设计表结构
 ## 7.path路径操作模块
   - path.basename
    - 获取路径的文件名
   - path.dirname
    - 获取一个路径中的目录部分
   - path.extname
    - 获取文件扩展名
   - path.parse

    - 把一个路径转为对象，很强大
   - path.join
    - 路径拼接
    - __dirname ```动态获取当前文件模块所属目录的绝对路径```
    - __filename ```动态获取当前文件的绝对路径```

 ## 8.blog项目
   
 ### 8.1 同步提交和异步提交
   - 表单的默认提交行为是同步提交，同步提交浏览器默认会锁死，一直等待转圈圈服务器的响应，直到浏览器做出响应
   - 同步提交的响应内容会直接被浏览器渲染到页面 
   - 服务端重定向针对异步请求无效,所以异步请求如果需要跳转页面需要客户端来跳转

 
     

